# 🚌 Gold Bus - تطبيق إدارة النقل المدرسي

تطبيق Flutter شامل لإدارة النقل المدرسي مع متابعة الحافلات المباشرة وإدارة المستخدمين المتعددة.

## ✨ المميزات الرئيسية

### 🔐 نظام المصادقة المتقدم
- تسجيل الدخول بالبريد الإلكتروني وكلمة المرور
- تسجيل الدخول بـ Google
- تسجيل الدخول برقم الهاتف
- نظام صلاحيات متعدد المستويات

### 👥 أدوار المستخدمين
- **ولي الأمر**: متابعة حافلة الطفل وإبلاغ الغياب
- **السائق**: إدارة الحافلة وتحديث الموقع
- **المشرفة**: إدارة الطلاب والمدرسة
- **الإدارة**: إدارة النظام بالكامل

### 🗺️ متابعة مباشرة للحافلات
- عرض خرائط حية باستخدام OpenStreetMap
- تحديث موقع الحافلات في الوقت الفعلي
- عرض خطوط السير
- تحديد موقع المستخدم

### 📱 واجهات متخصصة
- واجهة مخصصة لكل دور مستخدم
- تصميم متجاوب وجذاب
- دعم اللغة العربية والإنجليزية

## 🛠️ التقنيات المستخدمة

### Frontend
- **Flutter 3.7+** - إطار العمل الرئيسي
- **Riverpod** - إدارة الحالة
- **Go Router** - التنقل
- **flutter_map** - عرض الخرائط
- **FontAwesome** - الأيقونات

### Backend
- **Firebase Authentication** - المصادقة
- **Cloud Firestore** - قاعدة البيانات
- **Firebase Storage** - تخزين الملفات
- **Firebase Messaging** - التنبيهات

### الخرائط والموقع
- **OpenStreetMap** - مصدر الخرائط المجاني
- **Geolocator** - تحديد الموقع
- **flutter_map** - عرض الخرائط التفاعلية

## 📦 هيكل المشروع

```
lib/
├── core/                    # المكونات الأساسية
│   ├── constants/           # الثوابت
│   ├── localization/        # الترجمة
│   ├── router/             # التنقل
│   ├── theme/              # التصميم
│   └── widgets/            # المكونات المشتركة
├── features/               # الميزات
│   ├── auth/               # المصادقة
│   ├── home/               # الصفحة الرئيسية
│   ├── map/                # الخرائط والمتابعة
│   ├── profile/            # الملف الشخصي
│   ├── settings/           # الإعدادات
│   └── tracking/           # التتبع
├── models/                 # نماذج البيانات
├── providers/              # مزودي البيانات
├── services/               # الخدمات
└── main.dart              # نقطة البداية
```

## 🚀 التثبيت والتشغيل

### المتطلبات
- Flutter SDK 3.7+
- Dart 3.0+
- Android Studio / VS Code
- حساب Firebase

### خطوات التثبيت

1. **استنساخ المشروع**
   ```bash
git clone https://github.com/your-repo/gold-bus.git
cd gold-bus
   ```

2. **تثبيت التبعيات**
   ```bash
   flutter pub get
   ```

3. **إعداد Firebase**
   - إنشاء مشروع Firebase جديد
   - إضافة `google-services.json` (Android)
   - إضافة `GoogleService-Info.plist` (iOS)
   - تفعيل Authentication و Firestore

4. **تشغيل التطبيق**
   ```bash
   flutter run
   ```

## 🔧 الإعدادات

### إعداد Firebase
1. إنشاء مشروع Firebase
2. تفعيل Authentication مع البريد الإلكتروني و Google
3. إنشاء قاعدة بيانات Firestore
4. إعداد قواعد الأمان:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    match /buses/{busId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && 
        get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role in ['driver', 'admin'];
    }
    match /students/{studentId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && 
        get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role in ['supervisor', 'admin'];
    }
  }
}
```

### إعداد الخرائط
- لا يتطلب إعدادات إضافية (يستخدم OpenStreetMap المجاني)

## 📱 الاستخدام

### للمستخدمين الجدد
1. تحميل التطبيق
2. إنشاء حساب جديد
3. اختيار نوع الحساب (ولي أمر، سائق، مشرفة، إدارة)
4. انتظار الموافقة من الإدارة

### لأولياء الأمور
- متابعة موقع حافلة الطفل
- إبلاغ غياب الطفل
- استقبال تنبيهات وصول الحافلة

### للسائقين
- تحديث موقع الحافلة
- عرض قائمة الطلاب
- استقبال تنبيهات الغياب

### للمشرفات
- إدارة الطلاب
- عرض خط السير
- متابعة بلاغات الغياب
- التواصل مع أولياء الأمور

### للإدارة
- إدارة جميع المستخدمين
- عرض التقارير
- إعدادات النظام

## 🔒 الأمان والخصوصية

- تشفير البيانات في Firebase
- مصادقة آمنة متعددة المستويات
- صلاحيات محددة لكل دور
- حماية بيانات الطلاب والأطفال

## 🐛 استكشاف الأخطاء

### مشاكل شائعة
1. **خطأ في Firebase**: تأكد من إعداد الملفات بشكل صحيح
2. **مشكلة في الخرائط**: تأكد من اتصال الإنترنت
3. **خطأ في الموقع**: تأكد من منح إذن الموقع للتطبيق

## 🤝 المساهمة

نرحب بالمساهمات! يرجى:
1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. Commit التغييرات
4. Push إلى الفرع
5. إنشاء Pull Request

## 📄 الترخيص

هذا المشروع محمي بحقوق الطبع والنشر. جميع الحقوق محفوظة.

## 📞 الدعم

للحصول على الدعم:
- البريد الإلكتروني: support@goldbus.com
- الهاتف: 01204746897 - 01203935169

## 🎯 خطة التطوير المستقبلية

- [ ] إضافة نظام الدفع الإلكتروني
- [ ] تطوير تطبيق ويب للإدارة
- [ ] إضافة تقارير مفصلة
- [ ] دعم المزيد من اللغات
- [ ] إضافة نظام التقييمات

---

**Gold Bus** - نقل مدرسي آمن وموثوق 🚌✨